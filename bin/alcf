#!/usr/bin/env python

import sys
import pst
from alcf.cmds import CMDS

def main(cmd=None, *args, **kwargs):
	"""
alcf - Tool for processing of automatic lidar and ceilometer (ALC) data
and intercomparison with atmospheric models.

Usage:

	alcf <cmd> [<options>]
	alcf <cmd> --help

- `cmd`: command (see below)
- `options`: command options
- --help: print help

Commands:

- `convert`: convert input instrument or model data to ALCF standard NetCDF
- `model`: extract model data at a point or along a track
	"""

	if cmd is None:
		sys.stderr.write(main.__doc__.strip() + '\n')
		return 1

	func = CMDS.get(cmd)
	if func is None:
		raise ValueError('Invalid command: %s' % cmd)
	try:
		func(*args)
	except TypeError:
		sys.stderr.write(func.__doc__.strip() + '\n')
		return 1
	return 0

if __name__ == '__main__':
	args = pst.decode(' '.join(sys.argv))
	ret = main(*args[1:])
	sys.exit(ret)
